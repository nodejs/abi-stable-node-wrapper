<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>N-API: Node.js API (N-API) Package</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">N-API
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">C++ wrapper classes for the ABI-stable C APIs for Node.js</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Node.js API (N-API) Package </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This package contains header-only C++ wrapper classes for the ABI-stable Node.js API (N-API), along with library code that enables backward-compatibility with use with older versions of Node.js that do not have N-API built-in.</p>
<h3>API Documentation</h3>
<ul>
<li><a href="https://nodejs.org/api/n-api.html">ABI-Stable C APIs in Node.js</a></li>
<li><a href="https://nodejs.github.io/node-addon-api/namespace_napi.html">C++ APIs in this package</a></li>
</ul>
<h3>Getting Started</h3>
<p>To use N-API in a native module:</p><ol type="1">
<li>Add a dependency on this package to <code>package.json</code>: <div class="fragment"><div class="line">&quot;dependencies&quot;: {</div><div class="line">  &quot;node-addon-api&quot;: &quot;1.0.0&quot;,</div><div class="line">}</div></div><!-- fragment --></li>
<li>Reference this package's include directory and gyp file in <code>binding.gyp</code>: <div class="fragment"><div class="line">&#39;include_dirs&#39;: [&quot;&lt;!@(node -p \&quot;require(&#39;node-addon-api&#39;).include\&quot;)&quot;],</div><div class="line">&#39;dependencies&#39;: [&quot;&lt;!(node -p \&quot;require(&#39;node-addon-api&#39;).gyp\&quot;)&quot;],</div></div><!-- fragment --></li>
<li>Decide whether the package will enable C++ exceptions in the N-API wrapper. The base ABI-stable C APIs do not throw or handle C++ exceptions, but the N-API C++ wrapper classes may <em>optionally</em> <a href="https://nodejs.github.io/node-addon-api/class_napi_1_1_error.html">integrate C++ and JavaScript exception-handling</a>. To enable that capability, C++ exceptions must be enabled in <code>binding.gyp</code>: <div class="fragment"><div class="line">&#39;cflags!&#39;: [ &#39;-fno-exceptions&#39; ],</div><div class="line">&#39;cflags_cc!&#39;: [ &#39;-fno-exceptions&#39; ],</div><div class="line">&#39;xcode_settings&#39;: {</div><div class="line">  &#39;GCC_ENABLE_CPP_EXCEPTIONS&#39;: &#39;YES&#39;,</div><div class="line">  &#39;CLANG_CXX_LIBRARY&#39;: &#39;libc++&#39;,</div><div class="line">  &#39;MACOSX_DEPLOYMENT_TARGET&#39;: &#39;10.7&#39;,</div><div class="line">},</div><div class="line">&#39;msvs_settings&#39;: {</div><div class="line">  &#39;VCCLCompilerTool&#39;: { &#39;ExceptionHandling&#39;: 1 },</div><div class="line">},</div></div><!-- fragment --> Alternatively, disable use of C++ exceptions in N-API: <div class="fragment"><div class="line">&#39;defines&#39;: [ &#39;NAPI_DISABLE_CPP_EXCEPTIONS&#39; ],</div></div><!-- fragment --></li>
<li>Include <code><a class="el" href="napi_8h.html">napi.h</a></code> in the native module code. To ensure only ABI-stable APIs are used, DO NOT include <code>node.h</code>, <code>nan.h</code>, or <code>v8.h</code>. <div class="fragment"><div class="line">{C++}</div><div class="line">#include &quot;napi.h&quot;</div></div><!-- fragment --></li>
</ol>
<p>At build time, the N-API back-compat library code will be used only when the targeted node version <em>does not</em> have N-API built-in.</p>
<h2>Conversion Tool</h2>
<p>To make the migration to node-addon-api easier, we have provided a script to help complete the steps listed above. To use the conversion script:</p><ol type="1">
<li>Go to your module directory <div class="fragment"><div class="line">cd [module_path]</div></div><!-- fragment --></li>
<li>Install node-addon-api module <div class="fragment"><div class="line">npm install node-addon-api</div></div><!-- fragment --></li>
<li>Run node-addon-api conversion script <div class="fragment"><div class="line">node ./node_modules/node-addon-api/tools/conversion.js ./</div></div><!-- fragment --></li>
<li>While this script makes conversion easier, it still cannot fully convert the module. The next step is to try to build the module and complete the remaining conversions necessary to allow it to compile and pass all of the module's tests.</li>
</ol>
<p><a class="anchor" id="collaborators"></a> </p><h3>WG Members / Collaborators</h3>
<table class="doxtable">
<tr>
<th>Name </th><th>GitHub link  </th></tr>
<tr>
<td>Anna Henningsen </td><td><a href="https://github.com/addaleax">addaleax</a> </td></tr>
<tr>
<td>Arunesh Chandra </td><td><a href="https://github.com/aruneshchandra">aruneshchandra</a> </td></tr>
<tr>
<td>Benjamin Byholm </td><td><a href="https://github.com/kkoopa">kkoopa</a> </td></tr>
<tr>
<td>Gabriel Schulhof </td><td><a href="https://github.com/gabrielschulhof">gabrielschulhof</a> </td></tr>
<tr>
<td>Hitesh Kanwathirtha </td><td><a href="https://github.com/digitalinfinity">digitalinfinity</a> </td></tr>
<tr>
<td>Jason Ginchereau </td><td><a href="https://github.com/jasongin">jasongin</a> </td></tr>
<tr>
<td>Michael Dawson </td><td><a href="https://github.com/mhdawson">mhdawson</a> </td></tr>
<tr>
<td>Sampson Gao </td><td><a href="https://github.com/sampsongao">sampsongao</a> </td></tr>
<tr>
<td>Taylor Woll </td><td><a href="https://github.com/boingoing">boingoing</a> </td></tr>
</table>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
